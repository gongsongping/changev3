<ion-header>
  <!--<ion-navbar>
    <ion-title text-center>Home</ion-title>
  </ion-navbar>-->
</ion-header>

<ion-content>
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="刷新" refreshingSpinner="circles" refreshingText="刷新...">
    </ion-refresher-content>
  </ion-refresher>
  <div class='home-1'>
    <div class="header-title">
      <div class="left">
        <img src="assets/img/sprite/location_icon_home1.png" width="12">
        <span>成都市</span>
      </div>
      <a class="right" href="tel:4006001669">
        <img src="assets/img/sprite/photo_400.png" width="16" style="margin-top: 5px;" />
        <span>客户热线</span>
      </a>
    </div>
    <div class='slogon'>
      <h1>佣金只收0.8<span>%</span></h1>
    </div>
    <div class="tabmenu">
      <div class="menubar">
        <ul>
          <li [ngClass]="textTitle==i.textTitle ? 'current' : '' " *ngFor="let i of renting" (click)="rentingClick(i)">{{i.title}}</li>
        </ul>
      </div>
      <div class="menubar-content" *ngIf="textTitle==0">
        <div (click)='goBuy()'><img src="assets/img/sprite/home_0005_icon.png" />买二手房</div>
        <div><img src="assets/img/sprite/home_0003_icon.png" />卖二手房</div>
        <div><img src="assets/img/sprite/home_0004_icon.png" />买新房</div>
        <div><img src="assets/img/sprite/accurate_icon_home.png" style="width:45px;" />为您找房</div>
      </div>
      <div class="menubar-content" *ngIf="textTitle==1">
        <div><img src="assets/img/sprite/home_0008_icon.png" />租 房</div>
        <div><img src="assets/img/sprite/home_0006_icon.png" />出 租</div>
        <div><img src="assets/img/sprite/home_0007_icon.png" />写字楼</div>
      </div>
    </div>
  </div>
  <div class='home-3'>
    <div><img src="assets/img/ad_img_home.png"></div>
  </div>
  <div class="item-title">
    优质房源推荐
  </div>
  <!--{{testService.message}}-->

  <div style="padding:0px 8px;">
    <div *ngFor="let h of houses ; let i = index" style="border-bottom:1px solid #ededed;">
      <!--<house (click)="goDetail(h)" [h]='h'></house>-->
      <ion-item class="house-list" style="padding-left:0px;position: relative;" no-lines>
        <ion-thumbnail item-left>
          <!--<img *ngIf="h?.images !== '[]'" [src]="(h.images | ImgPipe)[0]">-->
          <!--<img *ngIf="h?.images == '[]'" src="assets/img/img_null.png" />-->
          <img [src]="!!img?img:'assets/img/img_null.png'">

        </ion-thumbnail>
        <p style="width:100%;font-weight:600;font-size:.9em;color:black;white-space:pre-line;">{{h?.name}}</p>
        <!--m<sup>2</sup>-->
        <p style="width:100%;font-size:.8em;margin-top:2px;">{{h?.houseType}} / {{h?.buildingArea}}平 / <span *ngIf="h?.orientation == 1">西</span>
          <span *ngIf="h?.orientation == 2">东</span>
          <span *ngIf="h?.orientation == 3">北</span>
          <span *ngIf="h?.orientation == 4">南</span>
          <span *ngIf="h?.orientation == 5">南北</span>
        </p>
        <p style="width:80%;font-size:.8em;overflow:hidden;margin-top:2px;">{{h?.subdistrict.name}}</p>
        <p style="width:80%;font-size:.8em;overflow:hidden;margin-top:2px;"><span class="positive">{{h?.watchedCount}}</span>人看过此房</p>

        <div style="position: absolute;bottom: 8px;right:3px;text-align:right;">
          <p style="color: tomato;font-size: 1em; margin:0px;" class="price">{{h?.price}}万</p>
          <p style="font-size: 0.7em;margin:0px;">{{h?.price*10000/h?.buildingArea | number : '1.0-0'}}元/平</p>
        </div>
      </ion-item>
    </div>
  </div>
  <div *ngIf='!dataLength' style='padding:30px;text-align: center;'>没有了!</div>
  <ion-fab bottom right #fab>
    <button ion-fab (click)="goPrecise()" style='font-size: 0.8em;font-weight: 600;'>
            为您找房
        </button>
  </ion-fab>

  <ion-infinite-scroll (ionInfinite)="loadMore($event)" [enabled]='!!dataLength' threshold='30%'>
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="正在努力加载中...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>